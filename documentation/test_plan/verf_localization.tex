% !TEX root = system_validation.tex

\subsection{Localization}
\label{sec:verification_localization}

\subsubsection{Performance Test: Robot Position Accuracy}
\label{test:localization_pt_accuracy}
\textbf{Test Question:} Is the localization system able to accurately determine the position of each robot?\\
\textbf{Operational Procedure:} Both robots sit stationary within the working bounds, and the localization system attempts to determine their locations.\\
\textbf{Metric:} The difference of the robots' actual position from the position reported by the localization system. \\
\textbf{Acceptance Criteria:} The reported position must be within 1/10in of the actual position.\\
\textbf{Requirement(s) Verified:} \nfrref{nfr:quality}, \frref{fr:in_bounds}

\subsubsection{Performance Test: Bounds Accuracy}
\label{test:localization_pt_bounds}
\textbf{Test Question:} Is the localization system able to accurately determine the boundaries of the workspace?\\
\textbf{Operational Procedure:} The localization system attempts to determine the bounds of the workspace.\\
\textbf{Metric:} The total difference in distance between the reported corners of the workspace and the actual corners.\\
\textbf{Acceptance Criteria:} The total difference must not exceed 1in.\\
\textbf{Requirement(s) Verified:} \frref{fr:in_bounds}

\subsubsection{Functional Test: Robot Position}
\label{test:localization_ft_robopos}
\textbf{Test Question:} Can the localization system find the robot?\\
\textbf{Operational Procedure:} With a single robot within the working bounds, the localization system attempts to determine the robot's location.\\
\textbf{Metric:} Whether or not a location is returned by the localization system.\\
\textbf{Acceptance Criteria:} The system must return a location for the robot. \\
\textbf{Requirement(s) Verified:} \frref{fr:in_bounds}, \nfrref{nfr:quality}

\subsubsection{Functional Test: Bounds}
\label{test:localization_ft_bounds}
\textbf{Test Question:} Can the localization system find the working bounds?\\
\textbf{Operational Procedure:} The localization system attempts to find all four corners of the working bounds while they are all in its field of view.\\
\textbf{Metric:} Whether or not locations are returned for all four corners.\\
\textbf{Acceptance Criteria:} The system must return locations for all four corners of the working bounds.\\
\textbf{Requirement(s) Verified:} \frref{fr:in_bounds}, \nfrref{nfr:quality}

\subsubsection{Failure Mode: Camera Failure}
\label{sec:localization_fm_cam}
\textbf{Description:} A camera failure occurs when the localization camera, mounted above the drawing surface, is incapable of gathering and/or sending data to the off-board processor for localization.\\
\textbf{Cause:} The two potential causes for a camera failure are insufficient power being supplied to the camera, or improper mounting. Improper mounting can cause the camera to fall or hang, which results in skewed and miscalibrated camera data.\\
\textbf{Effects:}  The effect of camera failure results in localization being poor or impossible, which can halt operation. This can be temporary, as a user-reported error would be generated to resolve the issue and continue operation.\\
\textbf{Criticality:}  This failure is of medium importance, as while it halts operation, it can be resolved by the user to continue the drawing process.\\
\textbf{Safety Hazards:} The only safety hazard exists if the camera falls entirely from its mount, in which case it may fall on a person below. \\

\subsubsection{Failure Mode: Unusable Localization Data}
\label{sec:localization_fm_unusable}
\textbf{Description:} This failure mode exists when the offboard processing system is unable to localize. \\
\textbf{Cause:} Causes include miscalibrated camera data, or incorrectly placed bounds tags. For example, the bounds tags could be placed in a shape that does not reflect the drawing surface accurately, resulting in incorrect localization. Blurry data could also result in misreading localization tags.\\
\textbf{Effects:}  If localization cannot be completed, robot operation will halt to avoid performing undefined actions. This error can be resolved by the user recalibrating or fixing the issue causing bad data.\\
\textbf{Criticality:}  Similar to \sref{sec:localization_fm_cam}, this failure is of medium criticality and can be resolved by the user.\\
\textbf{Safety Hazards:} There are no safety hazards that result from this failure mode.\\

\subsubsection{Failure Mode: Vision Tag Occlusion}
\label{sec:localization_fm_occlusion}
\textbf{Description:} Occlusion of the vision tags is when the camera does not have direct line-of-sight of any vision tag used for robot and bounds localization.\\
\textbf{Cause:} Tag occlusion is likely the result of an obstacle unexpectedly entering the scene. This could be a person walking over the drawing surface, or over the edges of the camera view, where the vision tags represnting the surface bounds are.\\
\textbf{Effects:} Inability to find a tag results in incomplete localization, and will pause operation until the user can resolve the issue. This guarantees all robots are tracked continually during operation, as well as staying within bounds of the drawing surface. \\
\textbf{Criticality:}  This is a minor failure, as robot operation can easily be corrected and operation can continue.\\
\textbf{Safety Hazards:} There are no safety hazards that result from this failure mode.\\
